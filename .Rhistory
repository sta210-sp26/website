#| echo: true
movie_scores <- read_csv("https://intro-regression.github.io/data/movie-scores.csv")
#| include: false
# load packages
library(tidyverse)       # for data wrangling
library(tidymodels)      # for modeling functions
library(fivethirtyeight) # for the fandango dataset
library(knitr)
# set default theme and larger font size for ggplot2
ggplot2::theme_set(ggplot2::theme_bw(base_size = 16))
# set default figure parameters for knitr
knitr::opts_chunk$set(
fig.width = 8,
fig.asp = 0.618,
fig.retina = 3,
dpi = 300,
out.width = "80%"
)
#| include: false
# load packages
library(tidyverse)       # for data wrangling
library(tidymodels)      # for modeling functions
library(knitr)
# set default theme and larger font size for ggplot2
ggplot2::theme_set(ggplot2::theme_bw(base_size = 16))
# set default figure parameters for knitr
knitr::opts_chunk$set(
fig.width = 8,
fig.asp = 0.618,
fig.retina = 3,
dpi = 300,
out.width = "80%"
)
#| echo: true
movie_scores <- read_csv("https://intro-regression.github.io/data/movie-scores.csv")
glimpse(movie_scores)
#| echo: false
#| fig-align: center
ggplot(data = movie_scores, mapping = aes(x = critics_score, y = audience_score)) +
geom_point(alpha = 0.5) +
labs(x = "Critics Score" ,
y = "Audience Score")
#| code-line-numbers: "|2,3"
movie_fit <- lm(audience_score ~ critics_score, data = movie_scores)
tidy(movie_fit) |>
kable(digits = 3)
#| message: false
library(tidyverse)  # for data wrangling
library(tidymodels) # for modeling and inference
library(knitr)      # to neatly format tables
library(scales)     # to format visualizations
# load other packages as needed
#| message: false
#| eval: false
childcare <- read_csv("data/childcare-2018-sample.csv")
map_data_sample <-  read_csv("data/county-map-2018.csv")
map_data_all <- read_csv("data/county-map-all.csv")
#| fig.show: hide
#| message: false
county_map_data <- left_join(childcare, map_data_sample)
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
#| message: false
library(tidyverse)  # for data wrangling
library(tidymodels) # for modeling and inference
library(knitr)      # to neatly format tables
library(scales)     # to format visualizations
library(sf)
# load other packages as needed
#| fig.show: hide
#| message: false
county_map_data <- left_join(childcare, map_data_sample)
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
#| message: false
#| eval: false
childcare <- read_csv("data/childcare-2018-sample.csv")
map_data_sample <-  read_csv("data/county-map-2018.csv")
map_data_all <- read_csv("data/county-map-all.csv")
#| fig.show: hide
#| message: false
county_map_data <- left_join(childcare, map_data_sample)
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
view(map_data_sample)
names(map_data_sample)
childcare <- read_csv("data/childcare-2018-sample.csv")
map_data_sample <-  read_csv("data/county-map-2018.csv")
map_data_all <- read_csv("data/county-map-all.csv")
county_map_data <- childcare |>
left_join(map_data_sample, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
names(county_map_data)
names(map_data_sample)
#| message: false
#| eval: false
childcare <- read_csv("data/childcare-2018-sample.csv")
map_data_sample <-  read_csv("data/county-map-2018.csv")
map_data_all <- read_csv("data/county-map-all.csv")
#| fig.show: hide
#| message: false
county_map_data <- childcare |>
left_join(map_data_sample, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
names(map_data_sample)
county_map_data <- childcare |>
left_join(map_data_sample, by = "fips")
view(county_map_data)
county_map_data <- map_data_sample |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
class(county_map_data)
inherits(map_data, "sf")        # should be TRUE
attr(map_data, "sf_column")
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
library(Sdf)
library(sf)
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
library(tigiris)
library(library(tigris))
library(tigris)
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE
) +
labs(
title = "County-level Map",
fill = "Value"
) +
theme_void()
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median income",
subtitle = "for 600 counties",
fill = "Median income") +
theme_bw()
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median income",
subtitle = "for 600 counties",
fill = "Median income") +
theme_void() +
coord_quickmap()
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = me_2018), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median income",
subtitle = "for 600 counties",
fill = "Median income") +
theme_void()
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = mfc_toddler), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median income",
subtitle = "for 600 counties",
fill = "Median income") +
theme_void()
names(county_map_data)
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = mc_toddler), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median income",
subtitle = "for 600 counties",
fill = "Median income") +
theme_void()
#| fig.show: hide
#| message: false
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
ggplot(county_map_data) +
geom_sf(aes(fill = mc_toddler), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median weekly preschool costs",
subtitle = "in United States 600 counties",
fill = "Median cost") +
theme_void()
counties_sf
dim(countiessf)
dim(counties_sf)
#| message: false
# create data frame containing mapping data for all counties
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
# join mapping data to analysis data
county_map_data <- counties_sf |>
left_join(childcare, by = "fips")
# produce map
ggplot(county_map_data) +
geom_sf(aes(fill = mc_toddler), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median weekly preschool costs",
subtitle = "in United States 600 counties",
fill = "Median cost") +
theme_void()
?st_as_sf
#| eval: true
childcare <- read_csv("data/childcare-2018-sample.csv")
map_data_sample <-  read_csv("data/county-map-2018.csv")
map_data_sample <- map_data_sample |>
st_as_sf()
map_data_sample <-  read_csv("data/county-map-2018.csv")
map_data_sample <- map_data_sample |>
st_as_sf()
#| message: false
#| eval: true
#| warning: false
# create data frame containing mapping data for all counties
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
# join mapping data to analysis data
county_map_data <- map_data_sample |>
left_join(childcare, by = "fips")
# produce map
ggplot(county_map_data) +
geom_sf(aes(fill = mc_toddler), color = NA) +
scale_fill_viridis_c(na.value = "grey90") +
coord_sf(
xlim = c(-125, -66),
ylim = c(24, 50),
expand = FALSE)  +
labs(title = "Median weekly preschool costs",
subtitle = "in United States 600 counties",
fill = "Median cost") +
theme_void()
#| message: false
#| eval: true
#| warning: false
# create data frame containing mapping data for all counties
counties_sf <- counties(cb = TRUE, year = 2018) |>
st_as_sf() |>
mutate(fips = paste0(STATEFP, COUNTYFP))
# join mapping data to analysis data
county_map_data < counties_sf |>
left_join(childcare, by = "fips")
?library
